/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-log.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-md5.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-data.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-notifire.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-http.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-socket.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/jees-unit.js
 * License: MIT license
 */

/**
 * @module Jees
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/cc/jees-platform.js
 * License: MIT license
 */

/**
 * @module Jees
 * @template CocosCreator 仅适用CocosCreator
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/cc/jees-file.js
 * License: MIT license
 */

/**
 * @module Jees
 * @template CocosCreator 仅适用CocosCreator
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/cc/jees-game.js
 * License: MIT license
 */

/**
 * @module Jees
 * @template CocosCreator 仅适用CocosCreator
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/cc/jees-view.js
 * License: MIT license
 */

/**
 * @module Jees
 * @template CocosCreator 仅适用CocosCreator
 */
// namespace:
/*
 * Author: Aiyoyoyo https://github.com/aiyoyoyo/CocosCreator-Jees/blob/master/src/cc/jees-hotUpdate.js
 * License: MIT license
 */

/**
 * @module Jees
 * @template CocosCreator 仅适用CocosCreator
 */
// namespace:
var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[a]=c.value)};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(b){return $jscomp.SYMBOL_PREFIX+(b||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(b){var a=0;return $jscomp.iteratorPrototype(function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.makeIterator=function(b){$jscomp.initSymbolIterator();var a=b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};window.jees={};window.jees=jees||{};jees.log={TYPE_LOG:0,TYPE_WARN:1,TYPE_ERROR:2,_history:[],_push:function(b,a,c,g,l,m,p){var n=[];p?n=[c,g,l,m,p]:m?n=[c,g,l,m]:l?n=[c,g,l]:g?n=[c,g]:c&&(n=[c]);this._history.push({text:b,type:a,params:n});100<this._history.length&&this._history.shift()},_log:function(b,a,c,g,l,m){m?console.log("CCC.Log:"+b,a,c,g,l,m):l?console.log("CCC.Log:"+b,a,c,g,l):g?console.log("CCC.Log:"+b,a,c,g):c?console.log("CCC.Log:"+b,a,c):a?console.log("CCC.Log:"+b,a):console.log("CCC.Log:"+b);this._push(b,this.TYPE_LOG,a,c,g,l,m)},_warn:function(b,a,c,g,l,m){m?console.warn("CCC.Warn:"+b,a,c,g,l,m):l?console.warn("CCC.Warn:"+b,a,c,g,l):g?console.warn("CCC.Warn:"+b,a,c,g):c?console.warn("CCC.Warn:"+b,a,c):a?console.warn("CCC.Warn:"+b,a):console.warn("CCC.Warn:"+b);this._push(b,this.TYEP_WARN,a,c,g,l,m)},_err:function(b,a,c,g,l,m){m?console.error("CCC.Err:"+b,a,c,g,l,m):l?console.error("CCC.Err:"+b,a,c,g,l):g?console.error("CCC.Err:"+b,a,c,g):c?console.error("CCC.Err:"+b,a,c):a?console.error("CCC.Err:"+b,a):console.error("CCC.Err:"+b);this._push(b,this.TYEP_ERROR,a,c,g,l,m)},log:function(b,a,c,g,l,m){this._log(b,a,c,g,l,m)},warn:function(b,a,c,g,l,m){this._warn(b,a,c,g,l,m)},err:function(b,a,c,g,l,m){this._err(b,a,c,g,l,m)}};window.log=function(b,a,c,g,l,m){jees.log.log(b,a,c,g,l,m)};window.err=function(b,a,c,g,l,m){jees.log.err(b,a,c,g,l,m)};window.warn=function(){jees.log.warn(_txt,_p0,_p1,_p2,_p3,_p4)};window.jees=jees||{};jees.md5=function(b){function a(a,b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}if(!b instanceof Uint8Array){try{log("input data type mismatch only support Uint8Array")}catch(q){}return null}for(var c=[],g=0;g<b.byteLength;g++)c.push(b[g]);b=c.length;c.push(128);var l=c.length%64;if(56<l){for(g=0;g<64-l;g++)c.push(0);l=c.length%64}for(g=0;g<56-l;g++)c.push(0);c=c.concat(function(a){for(var b=[],c=0;8>c;c++)b.push(a&255),a>>>=8;return b}(8*b));b=1732584193;for(var l=4023233417,m=2562383102,p=271733878,n=0,e=0,f=0,d=0,h=function(a,b,c,g){var h=d;d=f;var k=f=e;a=4294967295&n+(4294967295&a+(4294967295&b+c));e=4294967295&k+(a<<g&4294967295|a>>>32-g);n=h},g=0;g<c.length/64;g++){var n=b,e=l,f=m,d=p,k=64*g;h(e&f|~e&d,3614090360,a(c,k),7);h(e&f|~e&d,3905402710,a(c,k+4),12);h(e&f|~e&d,606105819,a(c,k+8),17);h(e&f|~e&d,3250441966,a(c,k+12),22);h(e&f|~e&d,4118548399,a(c,k+16),7);h(e&f|~e&d,1200080426,a(c,k+20),12);h(e&f|~e&d,2821735955,a(c,k+24),17);h(e&f|~e&d,4249261313,a(c,k+28),22);h(e&f|~e&d,1770035416,a(c,k+32),7);h(e&f|~e&d,2336552879,a(c,k+36),12);h(e&f|~e&d,4294925233,a(c,k+40),17);h(e&f|~e&d,2304563134,a(c,k+44),22);h(e&f|~e&d,1804603682,a(c,k+48),7);h(e&f|~e&d,4254626195,a(c,k+52),12);h(e&f|~e&d,2792965006,a(c,k+56),17);h(e&f|~e&d,1236535329,a(c,k+60),22);h(d&e|~d&f,4129170786,a(c,k+4),5);h(d&e|~d&f,3225465664,a(c,k+24),9);h(d&e|~d&f,643717713,a(c,k+44),14);h(d&e|~d&f,3921069994,a(c,k),20);h(d&e|~d&f,3593408605,a(c,k+20),5);h(d&e|~d&f,38016083,a(c,k+40),9);h(d&e|~d&f,3634488961,a(c,k+60),14);h(d&e|~d&f,3889429448,a(c,k+16),20);h(d&e|~d&f,568446438,a(c,k+36),5);h(d&e|~d&f,3275163606,a(c,k+56),9);h(d&e|~d&f,4107603335,a(c,k+12),14);h(d&e|~d&f,1163531501,a(c,k+32),20);h(d&e|~d&f,2850285829,a(c,k+52),5);h(d&e|~d&f,4243563512,a(c,k+8),9);h(d&e|~d&f,1735328473,a(c,k+28),14);h(d&e|~d&f,2368359562,a(c,k+48),20);h(e^f^d,4294588738,a(c,k+20),4);h(e^f^d,2272392833,a(c,k+32),11);h(e^f^d,1839030562,a(c,k+44),16);h(e^f^d,4259657740,a(c,k+56),23);h(e^f^d,2763975236,a(c,k+4),4);h(e^f^d,1272893353,a(c,k+16),11);h(e^f^d,4139469664,a(c,k+28),16);h(e^f^d,3200236656,a(c,k+40),23);h(e^f^d,681279174,a(c,k+52),4);h(e^f^d,3936430074,a(c,k),11);h(e^f^d,3572445317,a(c,k+12),16);h(e^f^d,76029189,a(c,k+24),23);h(e^f^d,3654602809,a(c,k+36),4);h(e^f^d,3873151461,a(c,k+48),11);h(e^f^d,530742520,a(c,k+60),16);h(e^f^d,3299628645,a(c,k+8),23);h(f^(e|~d),4096336452,a(c,k),6);h(f^(e|~d),1126891415,a(c,k+28),10);h(f^(e|~d),2878612391,a(c,k+56),15);h(f^(e|~d),4237533241,a(c,k+20),21);h(f^(e|~d),1700485571,a(c,k+48),6);h(f^(e|~d),2399980690,a(c,k+12),10);h(f^(e|~d),4293915773,a(c,k+40),15);h(f^(e|~d),2240044497,a(c,k+4),21);h(f^(e|~d),1873313359,a(c,k+32),6);h(f^(e|~d),4264355552,a(c,k+60),10);h(f^(e|~d),2734768916,a(c,k+24),15);h(f^(e|~d),1309151649,a(c,k+52),21);h(f^(e|~d),4149444226,a(c,k+16),6);h(f^(e|~d),3174756917,a(c,k+44),10);h(f^(e|~d),718787259,a(c,k+8),15);h(f^(e|~d),3951481745,a(c,k+36),21);b=4294967295&b+n;l=4294967295&l+e;m=4294967295&m+f;p=4294967295&p+d}return function(a,b,c,e){for(var g="",d,f,h=3;0<=h;h--)f=arguments[h],d=f&255,f>>>=8,d<<=8,d|=f&255,f>>>=8,d<<=8,d|=f&255,f>>>=8,d<<=8,f=d|=f,d=(f>>>24).toString(16),f=(f&16777215).toString(16),d="00".substr(0,2-d.length)+d+"000000".substr(0,6-f.length)+f,g+=d;return g}(p,m,l,b).toLowerCase()};window.md5=function(b){return jees.md5(b)};window.jees=jees||{};jees.data={_local:null,init:function(){this._inited||(this._inited=!0,this._local=jees.platform.localStorage())},set:function(b,a){this._local.setItem(b,a)},get:function(b){return this._local.getItem(b)},get2:function(b,a){var c=this.get(b);if(c){var c=JSON.parse(c),g;for(g in a)c.hasOwnProperty(g)&&(a[g]instanceof Date?a[g]=new Date(c[g]):g.startsWith("_")||(a[g]=c[g]));return a}return null},set2:function(b,a){for(var c in a)c.startsWith("_")&&delete a[c];this.set(b,JSON.stringify(a))},del:function(b){return this._local.removeItem(b)}};window.jees=jees||{};jees.notifire={_events:new Map,bind:function(b,a,c){b._evt_funs||(b._evt_funs=new Map);c&&b._evt_funs.set(a,c);(c=this._events.get(a))?c.add(b):(c=new Set,c.add(b),this._events.set(a,c))},unbind:function(b,a){if(a)b._evt_funs.has(a)&&b._evt_funs["delete"](a);else{var c=this._events.get(a);c&&c["delete"](b);b._evt_funs=null}},notify:function(b,a,c,g,l,m){for(var p=this._events.get(b),p=$jscomp.makeIterator(p.keys()),n=p.next();!n.done;n=p.next()){var n=n.value,e=!0;if(n._evt_funs){var f=n._evt_funs.get(b);f&&(f(b,a,c,g,l,m),e=!1)}e&&n.notify&&n.notify(b,a,c,g,l,m)}}};window.notify=function(b){jees.notifire.notify(b)};window.jees=jees||{};jees.http={_requester:null,init:function(){this._inited||(this._inited=!0)},_callset:function(b){var a=this._requester;a.onreadystatechange=function(){if(4===a.readyState&&200==a.status){var c=a.responseText;log("\u8fd4\u56de\u5185\u5bb9: ",c);b&&b(c)}else 4===a.readyState&&401==a.status&&err("401\u9519\u8bef.")};a.timeout=5E3},_get:function(b,a){var c=this._requester=jees.platform.request();c.open("GET",b,!0);this._callset(a);c.send()},_post:function(b,a,c){var g=this._requester=jees.platform.request();g.open("POST",b,!0);this._callset(c);g.send(JSON.stringify(a))},get:function(b,a){this._get(b,a)},post:function(b,a,c){this._post(b,a,c)}};window.jees=jees||{};jees.socket={_remote_config:"http://192.168.88.16/socket.json",init:function(){var b=this;if(!this._inited){this._inited=!0;var a=this._remote_config;a.startsWith("http")?jees.http.get(a,function(a){b._servers=JSON.parse(a).servers;jees.game.frame(function(){b.connect()})}):jees.file.json(a,function(a){b._servers=a.servers;jees.game.frame(function(){b.connect()})})}},connect:function(){console.log("\u670d\u52a1\u5668\u914d\u7f6e: ",this._servers)},request:function(){}};window.jees=jees||{};jees.unit={byte2kb:function(b,a){return(b/1024).toFixed(a||2)+"KB"},byte2mb:function(b,a){return(b/1048576).toFixed(a||2)+"MB"},byte2gb:function(b,a){return(b/1073741824).toFixed(a||2)+"GB"},byte2:function(b,a){var c=b/1024,g="KB";100<c&&(c/=1024,g="MB");100<c&&(c/=1024,g="GB");return c.toFixed(a||2)+g}};window.jees=jees||{};jees.platform={isNative:function(){return cc.sys.isNative},isAndroid:function(){return cc.sys.os===cc.sys.OS_ANDROID},request:function(){return cc.loader.getXMLHttpRequest()},localStorage:function(){return cc.sys.localStorage}};window.jees=jees||{};jees.file={load:function(b,a,c){cc.loader.loadRes(b,function(b,l){b?(err("\u52a0\u8f7d\u6587\u4ef6\u53d1\u751f\u9519\u8bef\uff1a"+JSON.stringify(b)),c&&c(b)):a&&a(l)})},loadRemote:function(b,a,c){cc.loader.load(b,function(g,l){g?(err("\u52a0\u8f7d\u6587\u4ef6["+b+"]\u53d1\u751f\u9519\u8bef\uff1a"+JSON.stringify(g)),c&&c(g)):a&&a(l)})},files:function(b,a){},json:function(b,a,c){cc.loader.loadRes(b,function(g,l){g?(err("\u52a0\u8f7d\u6587\u4ef6["+b+"]\u53d1\u751f\u9519\u8bef\uff1a"+JSON.stringify(g)),c&&c(g)):a&&a(l.json)})},file:function(b){return cc.url.raw(b)},text:function(b){return jsb&&jsb.fileUtils&&jsb.fileUtils.getStringFromFile(b)},remove:function(b){log("\u5220\u9664\u6587\u4ef6: "+b);jsb&&jsb.fileUtils&&jsb.fileUtils.isFileExist(b)&&jsb.fileUtils.removeFile(b)},removeDir:function(b){log("\u5220\u9664\u76ee\u5f55: "+b);jsb&&jsb.fileUtils&&jsb.fileUtils.isDirectoryExist(b)&&jsb.fileUtils.removeDirectory(b)}};window.jees=jees||{};jees.game={_mods:["Start","Update","Game"],_modIdx:1,_frame:[],init:function(){this._inited||(this._inited=!0,jees.data.init(),jees.http.init(),jees.socket.init())},enter:function(){var b=this._mods[this._modIdx];this._modIdx>=this._mods.length||(this._modIdx++,cc.director.loadScene(b))},leave:function(){},frame:function(b){b&&this._frame.push(b)},update:function(b){(b=this._frame.shift())&&b()}};window.jees=jees||{};jees.view={init:function(b){this._inited||(this._inited=!0)}};jees.view.Comp=cc.Class({"extends":cc.Component,onLoad:function(){this._ex_load&&this._ex_load()},start:function(){this._ex_start&&this._ex_start()},update:function(b){this._ex_update&&this._ex_update(b)},onEnable:function(){this._ex_enable&&this._ex_enable()},onDisable:function(){this._ex_disable&&this._ex_disable()},onDestroy:function(){this._ex_destroy&&this._ex_destroy()},bind:function(b,a){jees.notifire.bind(this,b,a)},unbind:function(b){jees.notifire.unbind(this,b)},notify:function(b,a,c,g,l,m){this._ex_notify&&this._ex_notify(b,a,c,g,l,m)}});jees.view.Fire=cc.Class({"extends":jees.view.Comp,properties:{nodeHead:cc.Node,nodeBody:cc.Node,viewBody:cc.Prefab},onLoad:function(){jees.game.init();jees.view.init(this);if(this.nodeBody&&this.viewBody){var b=cc.instantiate(this.viewBody);this.nodeBody.addChild(b)}this._ex_load&&this._ex_load()}});jees.view.Body=cc.Class({"extends":jees.view.Comp});window.jees=jees||{};window.HotUpdateEvent=function(b){this._code=b||jees.hotUpdate.UPDATE_FAILED;this.getEventCode=function(){return this._code}};jees.hotUpdate={ANDROID_MAX_CONNECT:2,_status:0,STATUS_NONE:0,STATUS_UPDATING:1,STATUS_FINISH:2,STATUS_ISNEW:3,STATUS_FAILED:-1,ERROR_NO_LOCAL_MANIFEST:0,ERROR_DOWNLOAD_MANIFEST:1,ERROR_PARSE_MANIFEST:2,NEW_VERSION_FOUND:3,ALREADY_UP_TO_DATE:4,UPDATE_PROGRESSION:5,ASSET_UPDATED:6,ERROR_UPDATING:7,UPDATE_FINISHED:8,UPDATE_FAILED:9,ERROR_DECOMPRESS:10,_current_version:"1.0.0",_remote_manifest:"http://192.168.88.16/ccc/project.manifest",_update_dir:"remote-assets",_manifest_name:"project.manifest",_manifest_file:null,_compare:function(b,a){log("\u6bd4\u8f83\u7248\u672c: "+b+", \u8fdc\u7a0b\u7248\u672c: "+a);for(var c=b.split("."),g=a.split("."),l=0;l<c.length;++l){var m=parseInt(c[l]),p=parseInt(g[l]||0);if(m!==p)return m-p}return g.length>c.length?-1:0},_verify:function(b,a){a.compressed||md5(jsb.fileUtils.getDataFromFile(b));return!0},_callback:function(b){var a=b.getEventCode();log("\u66f4\u65b0\u72b6\u6001: "+this.code(a));switch(a){case this.UPDATE_PROGRESSION:case this.ASSET_UPDATED:break;case this.NEW_VERSION_FOUND:this._status==this.STATUS_NONE&&(this._status=this.STATUS_UPDATING,this._am.update());break;case this.ALREADY_UP_TO_DATE:this._status==this.STATUS_NONE&&(this._status=this.STATUS_ISNEW,this._am.setEventCallback(null));break;case this.UPDATE_FINISHED:this._status==this.STATUS_UPDATING&&(this._status=this.STATUS_FINISH,this._save(),this._am.setEventCallback(null));break;default:this._status=this.STATUS_FAILED;this._am.setEventCallback(null);return}this._handler&&this._handler(this._status,b)},_save:function(){log("\u66f4\u65b0\u5b8c\u6210, \u4fdd\u5b58\u66f4\u65b0\u4fe1\u606f.");var b=jsb.fileUtils.getSearchPaths(),a=this._am.getLocalManifest().getSearchPaths();log("\u65b0\u7684\u641c\u7d22\u8def\u5f84: "+JSON.stringify(a));Array.prototype.unshift(b,a);b=JSON.stringify(b);log("\u6700\u7ec8\u641c\u7d22\u8def\u5f84: "+b);jees.data.set("HotUpdateSearchPaths",b);jsb.fileUtils.setSearchPaths(b)},code:function(b){var a="\u72b6\u6001\u7801["+b+"]: ";switch(b){case this.ERROR_NO_LOCAL_MANIFEST:a="\u672c\u5730Manifest\u6587\u4ef6\u6ca1\u6709\u627e\u5230!";break;case this.ERROR_DOWNLOAD_MANIFEST:a="\u8fdc\u7a0bManifest\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25!";break;case this.ERROR_PARSE_MANIFEST:a="\u8fdc\u7a0bManifest\u6587\u4ef6\u89e3\u6790\u5931\u8d25!";break;case this.NEW_VERSION_FOUND:a="\u53d1\u73b0\u65b0\u7684\u7248\u672c.";break;case this.ALREADY_UP_TO_DATE:a="\u5f53\u524d\u5df2\u7ecf\u662f\u6700\u65b0\u7248\u672c\u4e86.";break;case this.UPDATE_PROGRESSION:a="\u6b63\u5728\u66f4\u65b0\u4e2d...";break;case this.UPDATE_FINISHED:a="\u66f4\u65b0\u6210\u529f.";break;case this.UPDATE_FAILED:a="\u66f4\u65b0\u5931\u8d25!";break;case this.ERROR_UPDATING:a="\u66f4\u65b0\u53d1\u751f\u9519\u8bef!";break;case this.ERROR_DECOMPRESS:a="\u89e3\u538b\u53d1\u751f\u9519\u8bef!";break;case this.ASSET_UPDATED:a="\u8d44\u6e90\u5df2\u66f4\u65b0."}return a},version:function(){return this._current_version},bind:function(b){this._handler=b||null},check:function(){var b=this;log("\u68c0\u67e5\u66f4\u65b0...");if(jees.platform.isNative()){this._update_dir=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+this._update_dir;this._manifest_file=this._update_dir+"/"+this._manifest_name;var a="";if(jsb.fileUtils.isFileExist(this._manifest_file))log("\u4f7f\u7528\u672c\u5730\u5df2\u5b58\u50a8Manifest: "+this._manifest_file);else{log("\u7b2c\u4e00\u6b21\u66f4\u65b0...");log("\u4f7f\u7528Manifest: "+this._remote_manifest);if(this._remote_manifest.startsWith("http")){jees.http.get(this._remote_manifest,function(a){log("\u670d\u52a1\u5668\u8fd4\u56de2: ",a);a=JSON.parse(a);a.version=b._current_version;a.assets=[];a.searchPaths=[];a=JSON.stringify(a);log("Manifest\u5185\u5bb9: "+a);b._manifest_file=new jsb.Manifest(a,b._update_dir);jees.game.frame(function(){b.starting()})});return}this._manifest_file=jees.file.file(this._remote_manifest)}a=jees.file.text(this._manifest_file);log("Manifest\u5185\u5bb9: "+a);this._current_version=JSON.parse(a).version;this.starting()}else log("\u65e0\u6cd5\u4f7f\u7528\u5728\u7ebf\u66f4\u65b0"),this._handler&&this._handler(this.STATUS_FAILED,new HotUpdateEvent)},starting:function(){log("\u5f00\u59cb\u66f4\u65b0...");this._am=new jsb.AssetsManager(this._manifest_file,this._update_dir);this._am.setVerifyCallback(this._verify);this._am.setVersionCompareHandle(this._compare);this._am.setEventCallback(this._callback.bind(this));jees.platform.isAndroid()&&(this._am.setMaxConcurrentTask(this.ANDROID_MAX_CONNECT),log("\u8bbe\u7f6e\u5b89\u5353\u8bbe\u5907\u540c\u65f6\u6700\u5927\u4e0b\u8f7d\u6570\uff1a"+this.ANDROID_MAX_CONNECT));this._am.getState()===jsb.AssetsManager.State.UNINITED&&this._am.loadLocalManifest(this._manifest_file,this._update_dir);var b=this._am.getLocalManifest(),a=b&&b.isLoaded();a?this._am.checkUpdate():(log("Manifest\u6587\u4ef6\u65e0\u6548\u6216\u8005\u52a0\u8f7d\u5931\u8d25."+JSON.stringify(b)+"-\x3e"+a),this._handler&&this._handler(this.STATUS_FAILED,new HotUpdateEvent(this.ERROR_DOWNLOAD_MANIFEST)))},retry:function(){log("\u91cd\u65b0\u4e0b\u8f7d\u8d44\u6e90...");this._am.downloadFailedAssets()}};